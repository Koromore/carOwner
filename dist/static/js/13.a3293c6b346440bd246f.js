webpackJsonp([13],{DIl6:function(e,t){},inz8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"carownertype",props:{openDrawer:Number},components:{},data:function(){return{input:"",isCard:!0,ownerTypeListData:[],drawerData:!1,drawerTietle:"新增数据",loading:!1,ownerType:[],typeId:"",cooperList:[{typeId:this.typeId,itemName:"",money:"",isCard:!0,deleteFlag:!1}]}},watch:{openDrawer:function(e,t){this.drawerData=!0,this.drawerTietle="新增数据"}},beforeCreate:function(){},beforeMount:function(){},mounted:function(){this.getshowOwnerType(),this.getOwnerType()},methods:{typeIdChange:function(e){var t=this.cooperList;t.forEach(function(a,s){t[s].typeId=e})},addCooperList:function(e){this.cooperList.push({typeId:this.typeId,itemName:"",money:"",isCard:!0,deleteFlag:!1})},delCooperList:function(e){this.cooperList.length>1&&(this.cooperList[e].deleteFlag=!0)},delContent:function(){var e=this;this.$confirm("确认要删除该数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},changeSize:function(e){console.log(e)},changePage:function(e){console.log(e)},redact:function(e){var t=this;this.drawerData=!0,this.drawerTietle="编辑数据",console.log(e),this.typeId=e.typeId;var a=e.itemIds.split("/"),s=e.itemName.split("/"),i=e.isCards.split("/"),n=e.moneys.split("/"),o=[];a.forEach(function(e,a){var r={typeId:t.typeId,itemId:e,itemName:s[a],money:1*n[a],isCard:"",deleteFlag:!1};1==i[a]?r.isCard=!0:r.isCard=!1,o.push(r)}),this.cooperList=o},getOwnerType:function(){var e=this;this.$axios.post("/ocarplay/api/vehicleOwner/getOwnerType",{}).then(function(t){if(200==t.status){var a=[];t.data.forEach(function(e){var t={value:e.typeId,label:e.typeName};a.push(t)}),e.ownerType=a}})},getshowOwnerType:function(){var e=this;this.loading=!0;this.$axios.post("/ocarplay/api/ownerType/showOwnerType",{ids:0,pageNum:1,pageSize:30}).then(function(t){if(e.loading=!1,200==t.status&&0==t.data.errcode){var a=t.data;e.ownerTypeListData=a.data}})},saveSubmit:function(){var e=this.cooperList;console.log(e),e.forEach(function(t,a){t.isCard?e[a].isCard=1:e[a].isCard=0}),this.saveOwnerType(e)},saveOwnerType:function(e){var t=this;this.drawerData=!1,this.$axios.post("/ocarplay/api/ownerType/saveOwnerTypes",e).then(function(e){200==e.status&&0==e.data.errcode?(t.messageWin(e.data.msg),t.getshowOwnerType()):t.messageWin(e.data.msg)})},messageWin:function(e){this.$message({message:e,type:"success"})},messageWarning:function(e){this.$message({message:e,type:"warning"})},messageError:function(e){this.$message.error(e)}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"carownertype"}},[a("div",{staticClass:"table_list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.ownerTypeListData,"header-row-style":{height:"70px",background:"rgb(242, 242, 242)"},"header-cell-style":{color:"#000",background:"rgb(242, 242, 242)"},height:"100%"}},[a("el-table-column",{attrs:{prop:"name",label:"序号",width:"81",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("0"+e._s(t.$index+1))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"车主类型",width:"240"}}),e._v(" "),a("el-table-column",{attrs:{prop:"itemName",label:"合作事项","min-width":"240"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-edit",on:{click:function(a){return e.redact(t.row)}}})]}}])})],1)],1),e._v(" "),a("el-drawer",{attrs:{title:e.drawerTietle,visible:e.drawerData,size:"720px"},on:{"update:visible":function(t){e.drawerData=t}}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-row",{staticClass:"drawerData"},[a("el-col",{attrs:{span:4}},[e._v("车主类型:")]),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.typeIdChange},model:{value:e.typeId,callback:function(t){e.typeId=t},expression:"typeId"}},e._l(e.ownerType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{staticStyle:{"align-self":"start"},attrs:{span:4}},[e._v("合作事项:")]),e._v(" "),a("el-col",{staticStyle:{height:"auto"},attrs:{span:18}},e._l(e.cooperList,function(t,s){return a("el-col",{directives:[{name:"show",rawName:"v-show",value:!t.deleteFlag,expression:"!item.deleteFlag"}],key:s,staticClass:"list",attrs:{span:24}},[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.itemName,callback:function(a){e.$set(t,"itemName",a)},expression:"item.itemName"}})],1),e._v(" "),a("el-col",{attrs:{span:6,offset:1}},[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"现金","inactive-text":"油卡"},model:{value:t.isCard,callback:function(a){e.$set(t,"isCard",a)},expression:"item.isCard"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"金额",clearable:""},model:{value:t.money,callback:function(a){e.$set(t,"money",a)},expression:"item.money"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("i",{staticClass:"el-icon-plus",on:{click:e.addCooperList}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.delCooperList(s)}}})])],1)}),1)],1)],1),e._v(" "),a("el-col",{staticClass:"btn",attrs:{span:24}},[a("el-col",{attrs:{span:6,offset:5}},[a("el-button",{attrs:{type:"info"}},[e._v("取消")])],1),e._v(" "),a("el-col",{attrs:{span:6,offset:2}},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveSubmit}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(e){a("DIl6")},"data-v-90d3f294",null);t.default=n.exports}});