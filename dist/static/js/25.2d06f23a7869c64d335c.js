webpackJsonp([25],{hccR:function(e,a){},u47t:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={name:"certifications",props:{openDrawer:Number},components:{},data:function(){return{listLoading:!1,input:"",carSeriesListData:[{siteName:"张家古楼",type:"热门网红场地",city:"东北三省",add:"东北三省"}],tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}],drawerData:!1,drawerTietle:"新增数据",deptIdList:[{value:110,label:"吉利舆情"},{value:105,label:"沃尔沃"},{value:153,label:"长城"}],deptId:"",carTypesList:[],carType:"",subCarType:[{name:""}],total:0,pageNum:1,pageSize:10}},watch:{openDrawer:function(e,a){this.drawerData=!0,this.drawerTietle="新增数据"}},beforeCreate:function(){},beforeMount:function(){},mounted:function(){this.getCarSeriesLists()},methods:{deptChange:function(e){this.getCarTypes(e)},getCarTypes:function(e){var a=this,t={deptId:e};this.$axios.post("/ocarplay/api/carType/getCarTypeList",t).then(function(e){if(200==e.status){var t=[];e.data.forEach(function(e){var a={value:e.carTypeId,label:e.carTypeName};t.push(a)}),a.carTypesList=t}})},addSubCarType:function(){this.subCarType.push({name:""})},delSubCarType:function(e){this.subCarType.length>1&&this.subCarType.splice(e,1)},delContent:function(){var e=this;this.$confirm("确认要删除该数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},changeSize:function(e){console.log(e)},changePage:function(e){console.log(e)},redact:function(){this.drawerData=!0,this.drawerTietle="编辑数据"},cancel:function(){this.drawerData=!1},drawerDataClose:function(){this.carType="",this.deptId="",this.subCarType=[{name:""}]},getCarSeriesLists:function(){var e=this;this.listLoading=!0;var a={ids:0,pageNum:this.pageNum,pageSize:this.pageSize};this.$axios.post("/ocarplay/api/carSeries/getCarSeriesLists",a).then(function(a){if(console.log(a),e.listLoading=!1,200==a.status){var t=[{deptId:105,deptName:"沃尔沃",carType:[]},{deptId:110,deptName:"吉利舆情",carType:[]},{deptId:153,deptName:"长城",carType:[]}];a.data.items.forEach(function(e){105==e.deptId?t[0].carType.push({carTypeId:e.carTypeId,carTypeName:e.carTypeName,carSeriesIds:e.carSeriesIds,carSeriesName:e.carSeriesName}):110==e.deptId?t[1].carType.push({carTypeId:e.carTypeId,carTypeName:e.carTypeName,carSeriesIds:e.carSeriesIds,carSeriesName:e.carSeriesName}):153==e.deptId&&t[2].carType.push({carTypeId:e.carTypeId,carTypeName:e.carTypeName,carSeriesIds:e.carSeriesIds,carSeriesName:e.carSeriesName})}),e.carSeriesListData=t,console.log(t)}})},saveSubmit:function(){var e=this,a=[];this.subCarType.forEach(function(t){a.push({carTypeId:e.carType,carSeriesName:t.name,deleteFlag:!1})}),console.log(a),this.$axios.post("/ocarplay/api/carSeries/saveCarSeriess",a).then(function(a){200==a.status&&0==a.data.errcode?(e.messageWin(a.data.msg),e.getCarSeriesLists(),e.drawerData=!1):e.messageWin(a.data.msg)})},messageWin:function(e){this.$message({message:e,type:"success"})},messageWarning:function(e){this.$message({message:e,type:"warning"})},messageError:function(e){this.$message.error(e)}}},r={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"certifications"}},[t("div",{staticClass:"table_list"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.carSeriesListData,"header-row-style":{height:"70px",background:"rgb(242, 242, 242)"},"header-cell-style":{color:"#000",background:"rgb(242, 242, 242)"},height:"100%"}},[t("el-table-column",{attrs:{prop:"name",label:"序号",width:"81",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("0"+e._s(a.$index+1))]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"deptName",label:"品牌名称",width:"240"}}),e._v(" "),t("el-table-column",{attrs:{prop:"carSeriesName",label:"车型列表","min-width":"240"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-table",{staticStyle:{width:"100%"},attrs:{data:a.row.carType,"show-header":!1,border:""}},[t("el-table-column",{attrs:{prop:"carTypeName",label:"车型",width:"240"}}),e._v(" "),t("el-table-column",{attrs:{prop:"carSeriesName",label:"小车型"}})],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"address",label:"操作",width:"100"}},[[t("i",{staticClass:"el-icon-edit",on:{click:e.redact}})]],2)],1)],1),e._v(" "),t("el-drawer",{attrs:{title:e.drawerTietle,visible:e.drawerData,size:"566px"},on:{"update:visible":function(a){e.drawerData=a},close:e.drawerDataClose}},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("el-row",{staticClass:"drawerData"},[t("el-col",{attrs:{span:4}},[e._v("品牌名称:")]),e._v(" "),t("el-col",{attrs:{span:18}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.deptChange},model:{value:e.deptId,callback:function(a){e.deptId=a},expression:"deptId"}},e._l(e.deptIdList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),t("el-col",{attrs:{span:4}},[e._v("车型名称:")]),e._v(" "),t("el-col",{attrs:{span:18}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.carType,callback:function(a){e.carType=a},expression:"carType"}},e._l(e.carTypesList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),t("el-col",{attrs:{span:4}},[e._v("车型细分:")]),e._v(" "),t("el-col",{staticStyle:{height:"auto"},attrs:{span:18}},e._l(e.subCarType,function(a,s){return t("el-col",{key:s,staticClass:"carSeriesList",attrs:{span:24}},[t("el-col",{attrs:{span:19}},[t("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"item.name"}})],1),e._v(" "),t("el-col",{staticClass:"opera",attrs:{span:4,offset:1}},[t("i",{staticClass:"el-icon-delete",on:{click:function(a){return e.delSubCarType(s)}}}),e._v(" "),t("i",{staticClass:"el-icon-plus",on:{click:e.addSubCarType}})])],1)}),1)],1)],1),e._v(" "),t("el-col",{staticClass:"btn",attrs:{span:24}},[t("el-col",{attrs:{span:6,offset:5}},[t("el-button",{attrs:{type:"info"},on:{click:e.cancel}},[e._v("取消")])],1),e._v(" "),t("el-col",{attrs:{span:6,offset:2}},[t("el-button",{attrs:{type:"primary"},on:{click:e.saveSubmit}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var i=t("VU/8")(s,r,!1,function(e){t("hccR")},"data-v-0093ede7",null);a.default=i.exports}});